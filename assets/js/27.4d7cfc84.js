(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{460:function(s,t){s.exports="data:image/png;base64,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"},461:function(s,t,a){s.exports=a.p+"assets/img/1665456331018-18c45ae3-fa4c-4cd8-aabf-d9bace567693.a3f0d3e6.png"},462:function(s,t,a){s.exports=a.p+"assets/img/1665460724682-2222366d-cc07-43db-a8d0-fb27712b20a4.bc9d7953.png"},463:function(s,t,a){s.exports=a.p+"assets/img/1665460240687-3d0794c4-e6ed-4653-9463-767a7f943ff9.123691a6.png"},948:function(s,t,a){"use strict";a.r(t);var n=a(27),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"_9、bean的循环依赖问题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_9、bean的循环依赖问题"}},[s._v("#")]),s._v(" 9、Bean的循环依赖问题")]),s._v(" "),n("h3",{attrs:{id:"_9-1-什么是bean的循环依赖"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_9-1-什么是bean的循环依赖"}},[s._v("#")]),s._v(" 9.1 什么是Bean的循环依赖")]),s._v(" "),n("ul",[n("li",[s._v("A对象中有B属性，B对象中有A属性，这就是循环依赖，你依赖我，我依赖你")]),s._v(" "),n("li",[s._v("比如：丈夫类Husband，妻子类Wife，Husband中有Wife的引用，Wife中有Husband的引用")])]),s._v(" "),n("p",[n("img",{attrs:{src:a(460),alt:"image.png"}})]),s._v(" "),n("h3",{attrs:{id:"_9-2-singleton下的set注入产生的循环依赖"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_9-2-singleton下的set注入产生的循环依赖"}},[s._v("#")]),s._v(" 9.2 singleton下的set注入产生的循环依赖")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Husband")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Wife")]),s._v(" wife"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setWife")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Wife")]),s._v(" wife"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("wife "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" wife"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Husband{"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name=\'"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" name "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\\''")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('", wife="')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" wife"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'}'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br")])]),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Wife")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Husband")]),s._v(" husband"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setHusband")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Husband")]),s._v(" husband"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("husband "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" husband"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Wife{"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name=\'"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" name "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\\''")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('", husband="')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" husband"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'}'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br")])]),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[s._v("    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!--singleton + setter模式下的循环依赖，没有任何问题--\x3e")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!--singleton表示在整个Spring容器中是单例的，表示这个对象只有一个--\x3e")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("bean")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("husbandBean"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("com.yli.spring6.bean.Husband"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("scope")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("singleton"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("张三"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("wife"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("ref")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("wifeBean"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("bean")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("bean")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("wifeBean"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("com.yli.spring6.bean.Wife"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("scope")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("singleton"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("小花"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("husband"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("ref")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("husbandBean"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("bean")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[s._v("    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("testCD")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ClassPathXmlApplicationContext")]),s._v(" applicationContext "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ClassPathXmlApplicationContext")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"spring.xml"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Husband")]),s._v(" husbandBean "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" applicationContext"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getBean")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"husbandBean"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Husband")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("husbandBean"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Wife")]),s._v(" wifeBean "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" applicationContext"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getBean")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"wifeBean"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Wife")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("wifeBean"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("ul",[n("li",[s._v("在singleton + setter模式下，为什么循环依赖不会出现问题，Spring是如何应对的？\n"),n("ul",[n("li",[s._v("主要的原因是，在这种模式下Spring对Bean的管理主要分为清晰的两个阶段：\n"),n("ul",[n("li",[s._v("第一个阶段：在Spring容器加载的时候，实例化Bean，只要其中任意一个Bean实例化之后，马上进行“曝光”【不等属性赋值就曝光】")]),s._v(" "),n("li",[s._v("第二个阶段：Bean“曝光”之后，在进行属性赋值（调用set方法）")])])]),s._v(" "),n("li",[s._v("核心解决方案是：实例化对象和对象的属性赋值分为两个阶段来完成")])])]),s._v(" "),n("li",[s._v("只有在scope是singleton的情况下，Bean才会采取提前“曝光”的措施")])]),s._v(" "),n("h3",{attrs:{id:"_9-3-prototype下的set注入产生的循环依赖"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_9-3-prototype下的set注入产生的循环依赖"}},[s._v("#")]),s._v(" 9.3 prototype下的set注入产生的循环依赖")]),s._v(" "),n("ul",[n("li",[s._v("因为是多例的，每调用一次就会创建一次")])]),s._v(" "),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[s._v("    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!--在prototype + setter模式下的循环依赖--\x3e")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("bean")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("husbandBean"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("com.yli.spring6.bean.Husband"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("scope")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("张三"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("wife"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("ref")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("wifeBean"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("bean")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("bean")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("wifeBean"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("com.yli.spring6.bean.Wife"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("scope")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("小花"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("husband"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("ref")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("husbandBean"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("bean")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("ul",[n("li",[s._v("只有两个Bean对象的scope都是prototype时，才会报异常：BeanCreationException，有一个scope是singleton都不会报异常")])]),s._v(" "),n("h3",{attrs:{id:"_9-4-singleton下的构造注入产生的循环依赖"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_9-4-singleton下的构造注入产生的循环依赖"}},[s._v("#")]),s._v(" 9.4 singleton下的构造注入产生的循环依赖")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Husband")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Wife")]),s._v(" wife"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Husband")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Wife")]),s._v(" wife"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("wife "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" wife"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// -----------------------分割线--------------------------------")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Husband{"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name=\'"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" name "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\\''")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('", wife="')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" wife "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'}'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br")])]),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Wife")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Husband")]),s._v(" husband"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Wife")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Husband")]),s._v(" husband"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("husband "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" husband"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// -------------------------分割线--------------------------------")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Wife{"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name=\'"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" name "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\\''")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('", husband="')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" husband "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'}'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br")])]),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token prolog"}},[s._v('<?xml version="1.0" encoding="UTF-8"?>')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("beans")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("xmlns")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("http://www.springframework.org/schema/beans"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("xmlns:")]),s._v("xsi")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("http://www.w3.org/2001/XMLSchema-instance"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("xsi:")]),s._v("schemaLocation")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("bean")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("hBean"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("com.powernode.spring6.bean2.Husband"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("scope")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("singleton"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("constructor-arg")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("张三"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("constructor-arg")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("wife"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("ref")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("wBean"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("bean")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("bean")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("wBean"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("com.powernode.spring6.bean2.Wife"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("scope")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("singleton"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("constructor-arg")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("小花"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("constructor-arg")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("husband"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("ref")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("hBean"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("bean")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("beans")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("testSingletonAndConstructor")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ApplicationContext")]),s._v(" applicationContext "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ClassPathXmlApplicationContext")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"spring2.xml"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Husband")]),s._v(" hBean "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" applicationContext"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getBean")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hBean"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Husband")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Wife")]),s._v(" wBean "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" applicationContext"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getBean")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"wBean"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Wife")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("hBean"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("wBean"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("ul",[n("li",[s._v("执行结果：发生异常")])]),s._v(" "),n("p",[s._v("Caused by: org.springframework.beans.factory."),n("strong",[s._v("BeanCurrentlyInCreationException")]),s._v(": Error creating bean with name 'hBean': Requested bean is currently in creation: Is there an unresolvable circular reference?")]),s._v(" "),n("p",[s._v("​\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.beforeSingletonCreation(DefaultSingletonBeanRegistry.java:355)")]),s._v(" "),n("p",[s._v("​\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:227)")]),s._v(" "),n("p",[s._v("​\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)")]),s._v(" "),n("p",[s._v("​\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)")]),s._v(" "),n("p",[s._v("​\tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:325)")]),s._v(" "),n("p",[s._v("​\t... 56 more")]),s._v(" "),n("p",[s._v("和上一个测试结果相同，都是提示产生了循环依赖，并且"),n("strong",[s._v("Spring是无法解决这种循环依赖的。")])]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("主要原因是因为通过构造方法注入导致的，因为构造方法注入会导致实例化对象的过程和对象属性赋值的过程没有分开，必须在一起完成")])])]),s._v(" "),n("h3",{attrs:{id:"_9-5-spring解决循环依赖的机理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_9-5-spring解决循环依赖的机理"}},[s._v("#")]),s._v(" 9.5 Spring解决循环依赖的机理")]),s._v(" "),n("ul",[n("li",[s._v("Spring为什么可以解决set + singleton模式下的循环依赖？\n"),n("ul",[n("li",[s._v("根本原因在于：这种方式可以做到将“实例化Bean”和“给Bean属性赋值”这两个动作分开去完成")]),s._v(" "),n("li",[s._v("实例化Bean的时候，调用无参构造方法来完成，此时可以先不给属性赋值，可以提前将该Bean对象“曝光”给外界")]),s._v(" "),n("li",[s._v("给Bean属性赋值的时候，调用setter方法来完成")]),s._v(" "),n("li",[n("strong",[s._v("两个步骤完全可以分开，并且这两步不要求在同一时间点上完成")])]),s._v(" "),n("li",[s._v("也就是说，Bean都是单例的，我们可以先把所有的单例Bean实例化出来，放到一个集合中（缓存），所有单例的Bean全部实例化完成之后，我们在慢慢的调用setter方法给属性赋值，这样就解决了循环依赖问题")])])])]),s._v(" "),n("p",[n("img",{attrs:{src:a(461),alt:"image.png"}})]),s._v(" "),n("p",[s._v("*"),n("strong",[s._v("Cache of singleton objects: bean name to bean instance.*")]),s._v(" "),n("strong",[s._v("单例对象的缓存：key存储bean名称，value存储Bean对象【一级缓存】")])]),s._v(" "),n("p",[s._v("*"),n("strong",[s._v("Cache of early singleton objects: bean name to bean instance.*")]),s._v(" "),n("strong",[s._v("早期单例对象的缓存：key存储bean名称，value存储早期的Bean对象【二级缓存】")])]),s._v(" "),n("p",[s._v("*"),n("strong",[s._v("Cache of singleton factories: bean name to ObjectFactory.*")]),s._v(" "),n("strong",[s._v("单例工厂缓存：key存储bean名称，value存储该Bean对应的ObjectFactory对象【三级缓存】")])]),s._v(" "),n("ul",[n("li",[s._v("一级缓存存储的是：单例Bean对象，完整的单例Bean对象，也就是说这个缓存中的Bean对象的属性以及赋值了，是一个完整的Bean对象")]),s._v(" "),n("li",[s._v("二级缓存存储的是：早期的单例Bean对象，这个缓存中的单例Bean对象的属性没有赋值，只是一个早期的实例对象")]),s._v(" "),n("li",[s._v("三级缓存存储的是：单例工厂对象，这个里边存储了大量的“工厂对象”，每一个单例Bean对象都会对应一个单例工厂对象，这个集合中存储的是，创建该单例对象时对应的那个单例工厂对象")]),s._v(" "),n("li",[n("strong",[s._v("这三个缓存其实本质上是三个Map集合。")])])]),s._v(" "),n("p",[n("strong",[s._v("在该类中有这样一个方法addSingletonFactory()，这个方法的作用是：将创建Bean对象的ObjectFactory对象提前曝光。")])]),s._v(" "),n("p",[n("img",{attrs:{src:a(462),alt:"image.png"}})]),s._v(" "),n("p",[n("img",{attrs:{src:a(463),alt:"image.png"}})]),s._v(" "),n("p",[n("strong",[s._v("从源码中可以看到，spring会先从一级缓存中获取Bean，如果获取不到，则从二级缓存中获取Bean，如果二级缓存还是获取不到，则从三级缓存中获取之前曝光的ObjectFactory对象，通过ObjectFactory对象获取Bean实例，这样就解决了循环依赖的问题。")])]),s._v(" "),n("p",[n("strong",[s._v("总结：")])]),s._v(" "),n("p",[n("strong",[s._v("Spring只能解决setter方法注入的单例bean之间的循环依赖。ClassA依赖ClassB，ClassB又依赖ClassA，形成依赖闭环。Spring在创建ClassA对象后，不需要等给属性赋值，直接将其曝光到bean缓存当中。在解析ClassA的属性时，又发现依赖于ClassB，再次去获取ClassB，当解析ClassB的属性时，又发现需要ClassA的属性，但此时的ClassA已经被提前曝光加入了正在创建的bean的缓存中，则无需创建新的的ClassA的实例，直接从缓存中获取即可。从而解决循环依赖问题。")])])])}),[],!1,null,null,null);t.default=e.exports}}]);